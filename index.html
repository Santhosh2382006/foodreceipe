<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>роЙрогро╡рпБ роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯро▓рпН</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, #e0f2fe, #bfdbfe); /* роорпЖройрпНроорпИропро╛рой роирпАро▓ роХро┐ро░рпЗроЯро┐ропройрпНроЯрпН рокро┐ройрпНройрогро┐ */
            color: #1f2937;
        }

        /* ро▓рпЛроЯро┐роЩрпН роЕройро┐роорпЗро╖ройрпБроХрпНроХро╛рой роХрпАроГрокрпНро░рпЗроорпНроХро│рпН */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .pulse-animation {
            animation: pulse 1s ease-in-out infinite;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-white rounded-3xl shadow-2xl p-8 w-full max-w-lg space-y-6 transform transition-transform duration-300 hover:scale-105">
        <!-- роорпКро┤ро┐ родрпЗро░рпНро╡рпБ рокрпКродрпНродро╛ройрпН -->
        <div class="flex justify-end mb-4">
            <button id="lang-toggle-btn" class="flex items-center space-x-2 text-gray-600 hover:text-teal-600 transition-colors">
                <!-- роЙро▓роХ роРроХро╛ройрпН -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20zM2 12h20"></path>
                    <path d="M12 2a14.5 14.5 0 0 0-10 20"></path>
                </svg>
                <span id="lang-text">English</span>
            </button>
        </div>

        <!-- родройро┐родрпНродрпБро╡рооро╛рой роЙрогро╡рпБ роРроХро╛ройрпН (Unique Food Icon) -->
        <div class="flex justify-center mb-4">
            <span class="text-7xl transform transition-transform duration-300 hover:rotate-12" role="img" aria-label="Cook emoji">ЁЯСйтАНЁЯН│</span>
        </div>

        <!-- родро▓рпИрокрпНрокрпБ (Heading) -->
        <h1 id="app-title" class="text-4xl font-extrabold text-center text-teal-600 tracking-wide">роЙрогро╡рпБ роЪрпЖропрпНроорпБро▒рпИроХро│рпН</h1>

        <!-- родрпЗроЯро▓рпН рокроХрпБродро┐ (Search Section) -->
        <div id="search-section" class="flex flex-col space-y-4">
            <input type="text" id="recipe-input" placeholder="роЙрогро╡ро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН..." class="w-full p-4 rounded-xl border-2 border-gray-300 focus:outline-none focus:ring-4 focus:ring-teal-400 transition-all shadow-md">
            <button id="get-recipe-btn" class="w-full p-4 bg-teal-600 text-white font-bold rounded-xl shadow-lg hover:bg-teal-700 transition-all transform hover:scale-105">
                роЪрпЖропрпНроорпБро▒рпИропрпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН
            </button>
        </div>

        <!-- роЪрпЖропрпНроорпБро▒рпИ роХро╛роЯрпНроЪро┐ рокроХрпБродро┐ (Recipe Display Section) -->
        <div id="recipe-results" class="space-y-6 hidden">
            <!-- роЪрпЖропрпНроорпБро▒рпИ роЗроЩрпНроХрпЗ роХро╛роЯрпНроЯрокрпНрокроЯрпБроорпН -->
        </div>

        <!-- роЪрпЖропрпНродро┐ рокроХрпБродро┐ (Message Section) -->
        <div id="message-area" class="text-center text-gray-600 italic hidden p-4 rounded-xl bg-gray-100 border border-gray-200">
            <!-- роЪрпЖропрпНродро┐роХро│рпН роЗроЩрпНроХрпЗ роХро╛роЯрпНроЯрокрпНрокроЯрпБроорпН -->
        </div>

        <!-- роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ рокрпКродрпНродро╛ройрпН (Back to Home Button) -->
        <div class="mt-4">
            <button id="back-to-home-btn" class="hidden w-full p-4 bg-gray-400 text-white font-bold rounded-xl shadow-lg hover:bg-gray-500 transition-all transform hover:scale-105">
                роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓
            </button>
        </div>
    </div>

    <script>
        // DOM роХрпВро▒рпБроХро│рпИрокрпН рокрпЖро▒рпБродро▓рпН (Get DOM elements)
        const langToggleBtn = document.getElementById('lang-toggle-btn');
        const langText = document.getElementById('lang-text');
        const appTitle = document.getElementById('app-title');
        const recipeInput = document.getElementById('recipe-input');
        const getRecipeBtn = document.getElementById('get-recipe-btn');
        const searchSection = document.getElementById('search-section');
        const recipeResults = document.getElementById('recipe-results');
        const messageArea = document.getElementById('message-area');
        const backToHomeBtn = document.getElementById('back-to-home-btn');
        const htmlElement = document.documentElement;

        // роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ родро░ро╡рпБ (Translation data)
        const translations = {
            'ta': {
                appTitle: 'роЙрогро╡рпБ роЪрпЖропрпНроорпБро▒рпИроХро│рпН',
                inputPlaceholder: 'роЙрогро╡ро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН...',
                searchButton: 'роЪрпЖропрпНроорпБро▒рпИропрпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН',
                backButton: 'роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓',
                loading: 'роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯрокрпНрокроЯрпБроХро┐ро▒родрпБ...',
                emptyInput: 'родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роЙрогро╡ро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН.',
                apiError: 'роЗрогрпИрокрпНрокрпБ роЕро▓рпНро▓родрпБ родро░ро╡рпБрокрпН рокро┐ро┤рпИ: ',
                notFound: 'роЪрпЖропрпНроорпБро▒рпИ роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.',
                unexpectedResponse: 'API-ропро┐ро▓ро┐ро░рпБроирпНродрпБ роОродро┐ро░рпНрокро╛ро░ро╛род рокродро┐ро▓рпН роХро┐роЯрпИродрпНродродрпБ.',
                ingredientsHeading: 'родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН',
                preparationHeading: 'родропро╛ро░ро┐рокрпНрокрпБ роорпБро▒рпИ (рокроЯро┐роиро┐ро▓рпИроХро│рпН)',
                youtubeButton: 'YouTube-роЗро▓рпН роХро╛рогрпКро│ро┐ роЪрпЖропрпНроорпБро▒рпИропрпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН',
                langToggle: 'English'
            },
            'en': {
                appTitle: 'Food Recipes',
                inputPlaceholder: 'Enter a food name...',
                searchButton: 'Get Recipe',
                backButton: 'Go to Home',
                loading: 'Searching for recipe...',
                emptyInput: 'Please enter a food name.',
                apiError: 'Connection or data error: ',
                notFound: 'No recipe found. Please try again.',
                unexpectedResponse: 'Received unexpected response from API.',
                ingredientsHeading: 'Ingredients',
                preparationHeading: 'Preparation Steps',
                youtubeButton: 'Watch video recipe on YouTube',
                langToggle: 'родрооро┐ро┤рпН'
            }
        };

        // роЬрпЖрооро┐ройро┐ API ро╡ро┐роЪрпИ (Gemini API Key)
        const apiKey = "";

        let currentLang = 'ta';

        // UI-роР родро▒рпНрокрпЛродрпИроп роорпКро┤ро┐роХрпНроХрпБ рокрпБродрпБрокрпНрокро┐родрпНродро▓рпН (Update the UI to the current language)
        const updateUI = (lang) => {
            appTitle.textContent = translations[lang].appTitle;
            recipeInput.placeholder = translations[lang].inputPlaceholder;
            getRecipeBtn.textContent = translations[lang].searchButton;
            backToHomeBtn.textContent = translations[lang].backButton;
            langText.textContent = translations[lang].langToggle;
            htmlElement.lang = lang; // Change the HTML lang attribute
        };

        // роорпКро┤ро┐ рооро╛ро▒рпНро▒ рокрпКродрпНродро╛ройрпН роиро┐роХро┤рпНро╡рпБ (Language toggle button event)
        langToggleBtn.addEventListener('click', () => {
            currentLang = currentLang === 'ta' ? 'en' : 'ta';
            updateUI(currentLang);
        });

        // роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯро▓рпН роЪрпЖропро▓рпНрокро╛роЯрпБ (Recipe Search Function)
        getRecipeBtn.addEventListener('click', async () => {
            const searchTerm = recipeInput.value.trim();
            recipeResults.innerHTML = '';
            messageArea.textContent = '';
            messageArea.classList.add('hidden');
            recipeResults.classList.add('hidden');
            backToHomeBtn.classList.add('hidden');

            if (searchTerm === '') {
                messageArea.textContent = translations[currentLang].emptyInput;
                messageArea.classList.remove('hidden');
                return;
            }

            // API-роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН JSON роХроЯрпНроЯроорпИрокрпНрокрпБ (JSON schema for the API)
            const recipeSchema = {
                type: "OBJECT",
                properties: {
                    status: { type: "STRING" },
                    data: {
                        type: "OBJECT",
                        properties: {
                            recipeName: { type: "STRING" },
                            ingredients: {
                                type: "ARRAY",
                                items: { type: "STRING" }
                            },
                            preparation: {
                                type: "ARRAY",
                                items: { type: "STRING" }
                            },
                            youtubeLink: { type: "STRING" }
                        }
                    },
                    message: { type: "STRING" }
                }
            };
            
            // роорпКро┤ро┐роХрпНроХрпБ роПро▒рпНрок API рокрпНро░ро╛роорпНрокрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХрпБродро▓рпН (Create API prompt based on language)
            let promptText;
            if (currentLang === 'ta') {
                promptText = `роХрпАро┤рпЗ роХрпКроЯрпБроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│ роЙрогро╡ро┐ройрпН роЪрпЖропрпНроорпБро▒рпИ, родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН (роОроЯрпИропрпБроЯройрпН роЕро▓рпНро▓родрпБ роЕро│ро╡рпБроХро│рпБроЯройрпН), роЕродрпИ роирпЗро░родрпНродрпБроЯройрпН роХрпВроЯро┐роп рокроЯро┐рокрпНрокроЯро┐ропро╛рой роЪрпЖропро▓рпНроорпБро▒рпИропро╛роХ (step-by-step process with timing) рооро▒рпНро▒рпБроорпН роЕродро▒рпНроХро╛рой роТро░рпБ рокро┐ро░рокро▓рооро╛рой YouTube роЪрпЗройро▓ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ родрпКроЯро░рпНрокрпБроЯрпИроп YouTube ро╡рпАроЯро┐ропрпЛ роЗрогрпИрокрпНрокрпИ JSON ро╡роЯро┐ро╡родрпНродро┐ро▓рпН ро╡ро┤роЩрпНроХро╡рпБроорпН: ${searchTerm}. роЪрпЖропрпНроорпБро▒рпИ роЗро░рпБроирпНродро╛ро▓рпН, "status":"success" рооро▒рпНро▒рпБроорпН "data" object роЙроЯройрпН рокродро┐ро▓ро│ро┐роХрпНроХро╡рпБроорпН. роЪрпЖропрпНроорпБро▒рпИ роЗро▓рпНро▓рпИропрпЖройрпНро▒ро╛ро▓рпН, "status":"not_found" рооро▒рпНро▒рпБроорпН "message" роЙроЯройрпН рокродро┐ро▓ро│ро┐роХрпНроХро╡рпБроорпН.`;
            } else {
                promptText = `Provide the recipe for the following food in JSON format, including ingredients (with weights or measurements), a step-by-step preparation process with timing, and a relevant YouTube video link from a popular YouTube channel: ${searchTerm}. If a recipe exists, respond with "status":"success" and the "data" object. If no recipe is found, respond with "status":"not_found" and a "message".`;
            }

            // API-роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН роХроЯрпНроЯроорпИрокрпНрокрпБ (Payload for the API)
            const payload = {
                contents: [{
                    parts: [{ text: promptText }]
                }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: recipeSchema
                }
            };

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            // API роЕро┤рпИрокрпНрокро┐ройрпН рокрпЛродрпБ роХро╛родрпНродро┐ро░рпБроХрпНроХрпБроорпН роЪрпЖропрпНродро┐ (Show loading message)
            messageArea.textContent = translations[currentLang].loading;
            messageArea.classList.remove('hidden');
            getRecipeBtn.classList.add('pulse-animation');
            searchSection.classList.add('hidden');

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API роЕро┤рпИрокрпНрокрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИроирпНродродрпБ: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                const responseText = result.candidates[0].content.parts[0].text;
                const recipeData = JSON.parse(responseText);

                messageArea.classList.add('hidden');
                getRecipeBtn.classList.remove('pulse-animation');

                if (recipeData.status === 'success' && recipeData.data) {
                    const data = recipeData.data;

                    // роЪрпЖропрпНроорпБро▒рпИропрпИроХрпН роХро╛рогрпНрокро┐родрпНродро▓рпН (Display the recipe)
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'bg-gray-100 p-8 rounded-3xl shadow-inner space-y-6';
                    
                    // родро▓рпИрокрпНрокрпБ (Title)
                    const title = document.createElement('h2');
                    title.className = 'text-3xl font-bold text-gray-800 text-center mb-4';
                    title.textContent = data.recipeName || searchTerm;

                    // родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН (Ingredients Section)
                    const ingredientsSection = document.createElement('div');
                    ingredientsSection.className = 'bg-gray-200 p-6 rounded-2xl shadow-sm';
                    const ingredientsHeading = document.createElement('h3');
                    ingredientsHeading.className = 'text-xl font-semibold text-gray-700 mb-2';
                    ingredientsHeading.textContent = translations[currentLang].ingredientsHeading;
                    
                    const ingredientsList = document.createElement('ul');
                    ingredientsList.className = 'list-disc list-inside space-y-1 text-gray-700';
                    
                    data.ingredients.forEach(ingredient => {
                        const listItem = document.createElement('li');
                        listItem.textContent = ingredient;
                        ingredientsList.appendChild(listItem);
                    });
                    ingredientsSection.appendChild(ingredientsHeading);
                    ingredientsSection.appendChild(ingredientsList);

                    // родропро╛ро░ро┐рокрпНрокрпБ роорпБро▒рпИ (Preparation Section)
                    const preparationSection = document.createElement('div');
                    preparationSection.className = 'bg-gray-200 p-6 rounded-2xl shadow-sm';
                    const preparationHeading = document.createElement('h3');
                    preparationHeading.className = 'text-xl font-semibold text-gray-700 mb-2';
                    preparationHeading.textContent = translations[currentLang].preparationHeading;

                    const preparationList = document.createElement('ol');
                    preparationList.className = 'list-decimal list-inside space-y-2 text-gray-700';
                    
                    data.preparation.forEach(step => {
                        const listItem = document.createElement('li');
                        listItem.textContent = step;
                        preparationList.appendChild(listItem);
                    });
                    preparationSection.appendChild(preparationHeading);
                    preparationSection.appendChild(preparationList);

                    // YouTube роЗрогрпИрокрпНрокрпБ (YouTube Link)
                    const youtubeLink = document.createElement('a');
                    youtubeLink.href = data.youtubeLink;
                    youtubeLink.target = '_blank';
                    youtubeLink.className = 'block w-full text-center py-4 px-6 rounded-xl bg-red-600 text-white font-bold shadow-lg hover:bg-red-700 transition-all transform hover:scale-105';
                    youtubeLink.innerHTML = `<span class="text-2xl mr-2">тЦ╢я╕П</span> ${translations[currentLang].youtubeButton}`;

                    recipeCard.appendChild(title);
                    recipeCard.appendChild(ingredientsSection);
                    recipeCard.appendChild(preparationSection);
                    recipeCard.appendChild(youtubeLink);

                    recipeResults.appendChild(recipeCard);
                    
                    // роорпБроЯро┐ро╡рпБроХро│рпИроХрпН роХро╛рогрпНрокро┐родрпНродро▓рпН (Show results)
                    recipeResults.classList.remove('hidden');
                    backToHomeBtn.classList.remove('hidden');

                } else if (recipeData.status === 'not_found') {
                    // роЪрпЖропрпНроорпБро▒рпИ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ роОройроЪрпН роЪрпЖропрпНродро┐ роХро╛роЯрпНроЯрпБродро▓рпН (Show 'no recipe found' message)
                    messageArea.textContent = recipeData.message || translations[currentLang].notFound;
                    messageArea.classList.remove('hidden');
                    searchSection.classList.remove('hidden');
                } else {
                    // роОродро┐ро░рпНрокро╛ро░ро╛род API рокродро┐ро▓рпН (Unexpected API response)
                    throw new Error(translations[currentLang].unexpectedResponse);
                }

            } catch (error) {
                console.error("API Error:", error);
                messageArea.textContent = `${translations[currentLang].apiError} ${error.message}.`;
                messageArea.classList.remove('hidden');
                searchSection.classList.remove('hidden');
            }
        });

        // роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ роЪрпЖропро▓рпНрокро╛роЯрпБ (Back to Home Function)
        backToHomeBtn.addEventListener('click', () => {
            searchSection.classList.remove('hidden');
            recipeResults.classList.add('hidden');
            backToHomeBtn.classList.add('hidden');
            recipeInput.value = '';
            messageArea.classList.add('hidden');
        });

        // родрпКроЯроХрпНроХродрпНродро┐ро▓рпН UI-роР рокрпБродрпБрокрпНрокро┐родрпНродро▓рпН (Update UI on initial load)
        updateUI(currentLang);
    </script>
</body>
</html>
