<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>роЙрогро╡рпБ роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯро▓рпН</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* роорпЖройрпНроорпИропро╛рой роЪро╛роорпНрокро▓рпН рокро┐ройрпНройрогро┐ роиро┐ро▒роорпН */
            color: #1f2937;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-lg space-y-6">
        <!-- родройро┐родрпНродрпБро╡рооро╛рой роЙрогро╡рпБ роРроХро╛ройрпН (Unique Food Icon) -->
        <div class="flex justify-center mb-4">
            <span class="text-6xl" role="img" aria-label="Cook emoji">ЁЯСйтАНЁЯН│</span>
        </div>

        <!-- родро▓рпИрокрпНрокрпБ (Heading) -->
        <h1 class="text-3xl font-bold text-center text-teal-600">роЙрогро╡рпБ роЪрпЖропрпНроорпБро▒рпИроХро│рпН</h1>

        <!-- родрпЗроЯро▓рпН рокроХрпБродро┐ (Search Section) -->
        <div id="search-section" class="flex flex-col space-y-4">
            <input type="text" id="recipe-input" placeholder="роЙрогро╡ро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН..." class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all">
            <button id="get-recipe-btn" class="w-full p-3 bg-teal-600 text-white font-semibold rounded-lg shadow-md hover:bg-teal-700 transition-all">
                роЪрпЖропрпНроорпБро▒рпИропрпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН
            </button>
        </div>

        <!-- роЪрпЖропрпНроорпБро▒рпИ роХро╛роЯрпНроЪро┐ рокроХрпБродро┐ (Recipe Display Section) -->
        <div id="recipe-results" class="space-y-4 hidden">
            <!-- роЪрпЖропрпНроорпБро▒рпИ роЗроЩрпНроХрпЗ роХро╛роЯрпНроЯрокрпНрокроЯрпБроорпН -->
        </div>

        <!-- роЪрпЖропрпНродро┐ рокроХрпБродро┐ (Message Section) -->
        <div id="message-area" class="text-center text-gray-500 italic hidden">
            <!-- роЪрпЖропрпНродро┐роХро│рпН роЗроЩрпНроХрпЗ роХро╛роЯрпНроЯрокрпНрокроЯрпБроорпН -->
        </div>

        <!-- роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ рокрпКродрпНродро╛ройрпН (Back to Home Button) -->
        <div class="mt-4">
            <button id="back-to-home-btn" class="hidden w-full p-3 bg-gray-400 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500 transition-all">
                роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓
            </button>
        </div>
    </div>

    <script>
        // DOM роХрпВро▒рпБроХро│рпИрокрпН рокрпЖро▒рпБродро▓рпН (Get DOM elements)
        const recipeInput = document.getElementById('recipe-input');
        const getRecipeBtn = document.getElementById('get-recipe-btn');
        const searchSection = document.getElementById('search-section');
        const recipeResults = document.getElementById('recipe-results');
        const messageArea = document.getElementById('message-area');
        const backToHomeBtn = document.getElementById('back-to-home-btn');

        // роЬрпЖрооро┐ройро┐ API ро╡ро┐роЪрпИ (Gemini API Key)
        const apiKey = "AIzaSyC6EwYDsj7MFCe8dMur_JbIKSJxc-17Wmw"; // Canvas роЪрпВро┤ро▓ро┐ро▓рпН API ро╡ро┐роЪрпИ родро╛ройро╛роХро╡рпЗ ро╡ро┤роЩрпНроХрокрпНрокроЯрпБроорпН

        // роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯро▓рпН роЪрпЖропро▓рпНрокро╛роЯрпБ (Recipe Search Function)
        getRecipeBtn.addEventListener('click', async () => {
            const searchTerm = recipeInput.value.trim();
            recipeResults.innerHTML = '';
            messageArea.textContent = '';
            messageArea.classList.add('hidden');
            recipeResults.classList.add('hidden');
            backToHomeBtn.classList.add('hidden');

            if (searchTerm === '') {
                messageArea.textContent = 'родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роЙрогро╡ро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН.';
                messageArea.classList.remove('hidden');
                return;
            }

            // API-роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН JSON роХроЯрпНроЯроорпИрокрпНрокрпБ (JSON schema for the API)
            const recipeSchema = {
                type: "OBJECT",
                properties: {
                    status: { type: "STRING" },
                    data: {
                        type: "OBJECT",
                        properties: {
                            recipeName: { type: "STRING" },
                            ingredients: {
                                type: "ARRAY",
                                items: { type: "STRING" }
                            },
                            preparation: {
                                type: "ARRAY",
                                items: { type: "STRING" }
                            },
                            youtubeLink: { type: "STRING" }
                        }
                    },
                    message: { type: "STRING" }
                }
            };
            
            // API-роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН роХроЯрпНроЯроорпИрокрпНрокрпБ (Payload for the API)
            const payload = {
                contents: [{
                    parts: [{
                        text: `роХрпАро┤рпЗ роХрпКроЯрпБроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│ роЙрогро╡ро┐ройрпН роЪрпЖропрпНроорпБро▒рпИ, родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН (роОроЯрпИропрпБроЯройрпН роЕро▓рпНро▓родрпБ роЕро│ро╡рпБроХро│рпБроЯройрпН), роЕродрпИ роирпЗро░родрпНродрпБроЯройрпН роХрпВроЯро┐роп рокроЯро┐рокрпНрокроЯро┐ропро╛рой роЪрпЖропро▓рпНроорпБро▒рпИропро╛роХ (step-by-step process with timing) рооро▒рпНро▒рпБроорпН роЕродро▒рпНроХро╛рой роТро░рпБ рокро┐ро░рокро▓рооро╛рой YouTube роЪрпЗройро▓ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ родрпКроЯро░рпНрокрпБроЯрпИроп YouTube ро╡рпАроЯро┐ропрпЛ роЗрогрпИрокрпНрокрпИ JSON ро╡роЯро┐ро╡родрпНродро┐ро▓рпН ро╡ро┤роЩрпНроХро╡рпБроорпН: ${searchTerm}. роЪрпЖропрпНроорпБро▒рпИ роЗро░рпБроирпНродро╛ро▓рпН, "status":"success" рооро▒рпНро▒рпБроорпН "data" object роЙроЯройрпН рокродро┐ро▓ро│ро┐роХрпНроХро╡рпБроорпН. роЪрпЖропрпНроорпБро▒рпИ роЗро▓рпНро▓рпИропрпЖройрпНро▒ро╛ро▓рпН, "status":"not_found" рооро▒рпНро▒рпБроорпН "message" роЙроЯройрпН рокродро┐ро▓ро│ро┐роХрпНроХро╡рпБроорпН.`
                    }]
                }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: recipeSchema
                }
            };

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            // API роЕро┤рпИрокрпНрокро┐ройрпН рокрпЛродрпБ роХро╛родрпНродро┐ро░рпБроХрпНроХрпБроорпН роЪрпЖропрпНродро┐ (Show loading message)
            messageArea.textContent = 'роЪрпЖропрпНроорпБро▒рпИ родрпЗроЯрокрпНрокроЯрпБроХро┐ро▒родрпБ...';
            messageArea.classList.remove('hidden');
            searchSection.classList.add('hidden');

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API роЕро┤рпИрокрпНрокрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИроирпНродродрпБ: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                const responseText = result.candidates[0].content.parts[0].text;
                const recipeData = JSON.parse(responseText);

                messageArea.classList.add('hidden');

                if (recipeData.status === 'success' && recipeData.data) {
                    const data = recipeData.data;

                    // роЪрпЖропрпНроорпБро▒рпИропрпИроХрпН роХро╛рогрпНрокро┐родрпНродро▓рпН (Display the recipe)
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'bg-gray-100 p-6 rounded-lg shadow-inner space-y-4';
                    
                    // родро▓рпИрокрпНрокрпБ (Title)
                    const title = document.createElement('h2');
                    title.className = 'text-2xl font-bold text-gray-800';
                    title.textContent = data.recipeName || searchTerm;

                    // родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН (Ingredients Section)
                    const ingredientsHeading = document.createElement('h3');
                    ingredientsHeading.className = 'text-xl font-semibold text-gray-700';
                    ingredientsHeading.textContent = 'родрпЗро╡рпИропро╛рой рокрпКро░рпБроЯрпНроХро│рпН';
                    
                    const ingredientsList = document.createElement('ul');
                    ingredientsList.className = 'list-disc list-inside space-y-1 text-gray-700';
                    
                    data.ingredients.forEach(ingredient => {
                        const listItem = document.createElement('li');
                        listItem.textContent = ingredient;
                        ingredientsList.appendChild(listItem);
                    });

                    // родропро╛ро░ро┐рокрпНрокрпБ роорпБро▒рпИ (Preparation Section)
                    const preparationHeading = document.createElement('h3');
                    preparationHeading.className = 'text-xl font-semibold text-gray-700 mt-4';
                    preparationHeading.textContent = 'родропро╛ро░ро┐рокрпНрокрпБ роорпБро▒рпИ (рокроЯро┐роиро┐ро▓рпИроХро│рпН)';

                    const preparationList = document.createElement('ol');
                    preparationList.className = 'list-decimal list-inside space-y-2 text-gray-700';
                    
                    data.preparation.forEach(step => {
                        const listItem = document.createElement('li');
                        listItem.textContent = step;
                        preparationList.appendChild(listItem);
                    });

                    recipeCard.appendChild(title);
                    recipeCard.appendChild(ingredientsHeading);
                    recipeCard.appendChild(ingredientsList);
                    recipeCard.appendChild(preparationHeading);
                    recipeCard.appendChild(preparationList);

                    recipeResults.appendChild(recipeCard);
                    
                    // роорпБроЯро┐ро╡рпБроХро│рпИроХрпН роХро╛рогрпНрокро┐родрпНродро▓рпН (Show results)
                    recipeResults.classList.remove('hidden');
                    backToHomeBtn.classList.remove('hidden');

                } else if (recipeData.status === 'not_found') {
                    // роЪрпЖропрпНроорпБро▒рпИ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ роОройроЪрпН роЪрпЖропрпНродро┐ роХро╛роЯрпНроЯрпБродро▓рпН (Show 'no recipe found' message)
                    messageArea.textContent = recipeData.message || 'роЪрпЖропрпНроорпБро▒рпИ роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.';
                    messageArea.classList.remove('hidden');
                    searchSection.classList.remove('hidden');
                } else {
                    // роОродро┐ро░рпНрокро╛ро░ро╛род API рокродро┐ро▓рпН (Unexpected API response)
                    throw new Error('API-ропро┐ро▓ро┐ро░рпБроирпНродрпБ роОродро┐ро░рпНрокро╛ро░ро╛род рокродро┐ро▓рпН роХро┐роЯрпИродрпНродродрпБ.');
                }

            } catch (error) {
                console.error("API Error:", error);
                messageArea.textContent = `роЗрогрпИрокрпНрокрпБ роЕро▓рпНро▓родрпБ родро░ро╡рпБрокрпН рокро┐ро┤рпИ: ${error.message}. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.`;
                messageArea.classList.remove('hidden');
                searchSection.classList.remove('hidden');
            }
        });

        // роорпБроХрокрпНрокрпБрокрпН рокроХрпНроХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ роЪрпЖропро▓рпНрокро╛роЯрпБ (Back to Home Function)
        backToHomeBtn.addEventListener('click', () => {
            searchSection.classList.remove('hidden');
            recipeResults.classList.add('hidden');
            backToHomeBtn.classList.add('hidden');
            recipeInput.value = '';
        });
    </script>
</body>
</html>
